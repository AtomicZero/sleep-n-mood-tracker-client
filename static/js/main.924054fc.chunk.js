(this["webpackJsonpsleep-n-mood-tracker-client"]=this["webpackJsonpsleep-n-mood-tracker-client"]||[]).push([[0],{142:function(e,t,a){e.exports=a.p+"static/media/4k-night-forest-material-design-art.3f5353e5.jpg"},320:function(e,t,a){e.exports=a(582)},325:function(e,t,a){},582:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),c=a.n(l),o=(a(325),a(55)),s=a(45),i=a(586),u=Object(n.createContext)(),m=a(194),p=function(){var e=Object(n.useContext)(u).setUser;return r.a.createElement(m.a,{mode:"horizontal",style:{padding:"0px 50px"}},r.a.createElement(m.a.Item,{key:"dashboard"},r.a.createElement(s.b,{to:"/dashboard"},"Dashboard")),r.a.createElement(m.a.Item,{key:"plans"},r.a.createElement(s.b,{to:"/plans"},"My Plans")),r.a.createElement(m.a.Item,{key:"logout",onClick:function(){localStorage.removeItem("user"),e({})}},"Logout"))},d=function(){return Object(n.useContext)(u).user.token?r.a.createElement(p,null):r.a.createElement(m.a,{mode:"horizontal",style:{padding:"0px 50px"}},r.a.createElement(m.a.Item,{key:"login"},r.a.createElement(s.b,{to:"/login"},"Login")),r.a.createElement(m.a.Item,{key:"register"},r.a.createElement(s.b,{to:"/register"},"Register")))},g=a(41),E=a(35),b=a.n(E),y=a(49),f=a(50),h=a.n(f),x=a(141),k=a(592),v=a(111),j=a(64),O=a(588),w=a(593),C=a(54),I="https://limitless-waters-62037.herokuapp.com",S="".concat(I,"/auth/login"),P="".concat(I,"/auth/register"),A=a(142),H=a.n(A),M=function(){var e=Object(g.g)(),t={wrapperCol:{offset:8,span:16}},a=function(){var t=Object(y.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.post(P,a);case 3:n=t.sent,(r=n.data).success?k.a.success({content:r.message,onOk:function(){e.push("/login")}}):k.a.error({title:"Error",content:"Failed to create an account. Please try again later."}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),k.a.error({title:"Error",content:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(v.a,{type:"flex",justify:"center",align:"middle",style:{minHeight:"700px",backgroundImage:"url(".concat(H.a,")"),backgroundPosition:"center",backgroundSize:"fit",backgroundRepeat:"no-repeat"}},r.a.createElement(j.a,{span:x.isMobile?24:12,style:{border:"solid 1px #8a838a",backgroundColor:"white"}},r.a.createElement(O.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{name:"basic",initialValues:{remember:!0},onFinish:a,style:{margin:"50px"}}),r.a.createElement(O.a.Item,{label:"First Name",name:"firstName",rules:[{required:!0,message:"Please input your first name"}]},r.a.createElement(w.a,null)),r.a.createElement(O.a.Item,{label:"Last Name",name:"lastName",rules:[{required:!0,message:"Please input your last name"}]},r.a.createElement(w.a,null)),r.a.createElement(O.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email"}]},r.a.createElement(w.a,null)),r.a.createElement(O.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password"}]},r.a.createElement(w.a.Password,null)),r.a.createElement(O.a.Item,t,r.a.createElement(C.a,{type:"primary",htmlType:"submit"},"Submit")))))},B=function(){var e=Object(n.useContext)(u).setUser,t={wrapperCol:{offset:8,span:16}},a=function(){var t=Object(y.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.post(S,a);case 3:n=t.sent,r=n.data,localStorage.setItem("user",JSON.stringify(r)),e(r),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),k.a.error({title:"Error",content:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(v.a,{type:"flex",justify:"center",align:"middle",style:{minHeight:"700px",backgroundImage:"url(".concat(H.a,")"),backgroundPosition:"center",backgroundSize:"auto",backgroundRepeat:"no-repeat"}},r.a.createElement(j.a,{span:x.isMobile?24:12,style:{border:"solid 1px #8a838a",backgroundColor:"white"}},r.a.createElement(O.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{name:"basic",initialValues:{remember:!0},onFinish:a,style:{margin:"50px"}}),r.a.createElement(O.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email"}]},r.a.createElement(w.a,null)),r.a.createElement(O.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password"}]},r.a.createElement(w.a.Password,null)),r.a.createElement(O.a.Item,t,r.a.createElement(C.a,{type:"primary",htmlType:"submit"},"Submit")))))},T=a(584),q=a(598),z=a(595),D=a(587),R=function(e){var t=e.onCancel,a=Object(n.useContext)(u).user,l=Object(g.g)(),c=function(){var e=Object(y.a)(b.a.mark((function e(t){var n,r,c,o,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,r=t.desiredHours,c=t.weekCommencing,e.prev=1,o={title:n,desiredHours:r,weekCommencing:c.toDate()},e.next=5,h.a.post("".concat(I,"/api/plans"),o,{headers:{Authorization:"Bearer ".concat(a.token)}});case 5:s=e.sent,i=s.data._id,k.a.success({content:"Yeah",onOk:function(){l.push("/plans/".concat(i))}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),k.a.error({title:"Failed to create a sleep plan",content:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{justify:"center",align:"middle"},r.a.createElement(O.a,Object.assign({},{labelCol:{span:10},wrapperCol:{span:14}},{name:"basic",initialValues:{remember:!0},style:{margin:"50px"},onFinish:c}),r.a.createElement(O.a.Item,{label:"Title",name:"title",rules:[{required:!0,message:"Please input a plan title for your sleep plan"}]},r.a.createElement(w.a,null)),r.a.createElement(O.a.Item,{label:"Sleep Hours",name:"desiredHours",rules:[{required:!0,message:"Please input your sleep goal hours for your sleep plan"}]},r.a.createElement(z.a,{style:{width:"100%"}})),r.a.createElement(O.a.Item,{label:"Week Commencing",name:"weekCommencing",rules:[{required:!0,message:"Please input the week commencing date for your sleep plan"}]},r.a.createElement(D.a,{style:{width:"100%"}})),r.a.createElement(O.a.Item,{justify:"center",align:"middle"},r.a.createElement(C.a,{type:"default",htmlType:"button",onClick:t,style:{marginRight:"8px"}},"Cancel"),r.a.createElement(C.a,{type:"primary",htmlType:"submit",style:{marginRight:"8px"}},"Submit"))))},F=a(590),L=a(596),N=a(597),_=a(589),W=function(e){return r.a.createElement(F.a,{key:e._id,title:r.a.createElement("span",null,"COMPLETE"===e.status?r.a.createElement(L.a,{style:{color:"green",marginRight:"8px"}}):r.a.createElement(N.a,{style:{color:"orange",marginRight:"8px"}})," ",e.title),extra:r.a.createElement(s.b,{to:"/plans/".concat(e._id)},"View"),style:{width:300,margin:"20px"}},r.a.createElement("h3",{style:{textAlign:"center"}},e.desiredHours," hrs"),r.a.createElement("p",{style:{textAlign:"center"}},"Week starting:"," ",Object(_.a)(new Date(e.weekCommencing),"EEE do MMM yyyy")))},Y=function(e){var t=e.plans,a=void 0===t?[]:t;return a.length?r.a.createElement(v.a,{style:{display:"flex",flexWrap:"wrap"},justify:"center",align:"middle"},a.map(W)):r.a.createElement(v.a,{style:{display:"flex",flexWrap:"wrap"},justify:"center",align:"middle"},r.a.createElement("h3",null,"No plans"))},U=function(){var e=Object(g.g)(),t=Object(n.useContext)(u).user,a=Object(n.useState)([]),l=Object(o.a)(a,2),c=l[0],s=l[1],i=Object(n.useState)(!0),m=Object(o.a)(i,2),p=m[0],d=m[1],E=Object(n.useState)(!1),f=Object(o.a)(E,2),x=f[0],j=f[1];Object(n.useEffect)((function(){(function(){var a=Object(y.a)(b.a.mark((function a(){var n,r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.get("".concat(I,"/api/plans"),{headers:{Authorization:"Bearer ".concat(t.token)}});case 3:n=a.sent,r=n.data,s(r.results),d(!1),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),d(!1),k.a.error({title:"Error",content:a.t0.message,onOk:function(){e.push("/dashboard")}});case 13:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(){return a.apply(this,arguments)}})()()}),[e,t.token]);return p?r.a.createElement("div",{style:{textAlign:"center",background:"rgba(0, 0, 0, 0.05)",borderRadius:"4px",marginBottom:"20px",padding:"30px 50px",margin:"20px 0"}},r.a.createElement(T.a,null)):r.a.createElement("div",null,r.a.createElement(v.a,{style:{display:"flex",flexWrap:"wrap",marginTop:"20px"},justify:"center",align:"middle"},r.a.createElement(C.a,{type:"primary",onClick:function(){j(!0)},size:"large",style:{width:"50%"}},r.a.createElement("span",null,r.a.createElement(q.a,null)," Plan"))),r.a.createElement(k.a,{title:"Add New Plan",visible:x,footer:null},r.a.createElement(R,{onCancel:function(e){j(!1)}})),r.a.createElement(Y,{plans:c}))},V=a(87),J=a(93),K=function(e){var t=e.logs;console.log(t);var a=t.map((function(e){var t=Object(_.a)(new Date(e.date),"dd-MM-yy");return Object(V.a)(Object(V.a)({},e),{},{date:t})})),n=t.reduce((function(e,t){return e+=t.actualSleepHours}),0);console.log("TOTAL SLEEP HOURS",n);var l="red";return l=n<30?"green":"blue",r.a.createElement(J.c,{width:600,height:400,data:a},r.a.createElement(J.e,{dataKey:"date"}),r.a.createElement(J.f,null),r.a.createElement(J.d,null),r.a.createElement(J.a,null),r.a.createElement(J.b,{type:"monotone",dataKey:"actualSleepHours",stroke:l,activeDot:{r:6}}))},G=function(){var e=Object(g.g)(),t=Object(n.useContext)(u).user,a=Object(n.useState)([]),l=Object(o.a)(a,2),c=l[0],s=l[1],i=Object(n.useState)(!0),m=Object(o.a)(i,2),p=m[0],d=m[1];return Object(n.useEffect)((function(){(function(){var a=Object(y.a)(b.a.mark((function a(){var n,r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.get("".concat(I,"/api/logs"),{headers:{Authorization:"Bearer ".concat(t.token)}});case 3:n=a.sent,r=n.data,s(r.results),d(!1),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),d(!1),k.a.error({title:"Error",content:a.t0.message,onOk:function(){e.push("/dashboard")}});case 13:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(){return a.apply(this,arguments)}})()()}),[e,t.token]),p?r.a.createElement("div",{style:{textAlign:"center",background:"rgba(0, 0, 0, 0.05)",borderRadius:"4px",marginBottom:"20px",padding:"30px 50px",margin:"20px 0"}},r.a.createElement(T.a,null)):r.a.createElement("div",null,r.a.createElement(v.a,{style:{display:"flex",flexWrap:"wrap",marginTop:"20px"},justify:"center",align:"middle","background-color":"#d3adf7"},r.a.createElement(K,{logs:c})))},Q=a(591),X=a(594),Z=a(599),$=a(76),ee=a.n($),te=a(585),ae=function(e){var t=e.onCancel,a=e.setPlan,l=e.weekCommencing,c=Object(g.h)().planId,o=Object(n.useContext)(u).user,s=function(){var e=Object(y.a)(b.a.mark((function e(n){var r,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("".concat(I,"/api/plans/").concat(c,"/logs"),n,{headers:{Authorization:"Bearer ".concat(o.token)}});case 3:r=e.sent,l=r.data,k.a.success({content:"Thank you for adding your log.",onOk:function(){a(l),t()}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),k.a.error({title:"Failed to create a sleep plan",content:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{justify:"center",align:"middle"},r.a.createElement(O.a,Object.assign({},{labelCol:{span:10},wrapperCol:{span:14}},{name:"addLogForm",initialValues:{remember:!0},style:{margin:"50px"},onFinish:s}),r.a.createElement(O.a.Item,{label:"Sleep Hours",name:"actualSleepHours",rules:[{required:!0,message:"Please input your sleep hours for your log"}]},r.a.createElement(z.a,{style:{width:"100%"}})),r.a.createElement(O.a.Item,{label:"Date",name:"date",rules:[{required:!0,message:"Please input the date for your log"}]},r.a.createElement(D.a,{style:{width:"100%"},disabledDate:function(e){return e.isAfter(Object(te.a)(new Date(l),7))||e.isBefore(new Date(l))}})),r.a.createElement(O.a.Item,{label:"Mood",name:"mood",rules:[{required:!0,message:"Please input a mood for your log"}]},r.a.createElement(w.a,null)),r.a.createElement(O.a.Item,{justify:"center",align:"middle"},r.a.createElement(C.a,{type:"default",htmlType:"button",onClick:t,style:{marginRight:"8px"}},"Cancel"),r.a.createElement(C.a,{type:"primary",htmlType:"submit",style:{marginRight:"8px"}},"Submit"))))},ne=function(){var e=Object(g.h)().planId,t=Object(g.g)(),a=Object(n.useContext)(u).user,l=Object(n.useState)({}),c=Object(o.a)(l,2),s=c[0],i=c[1],m=Object(n.useState)(!0),p=Object(o.a)(m,2),d=p[0],E=p[1],f=Object(n.useState)(!1),x=Object(o.a)(f,2),j=x[0],S=x[1],P=Object(n.useState)(!1),A=Object(o.a)(P,2),H=A[0],M=A[1];if(Object(n.useEffect)((function(){(function(){var n=Object(y.a)(b.a.mark((function n(){var r,l;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.get("".concat(I,"/api/plans/").concat(e),{headers:{Authorization:"Bearer ".concat(a.token)}});case 3:r=n.sent,l=r.data,i(l.results),E(!1),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),E(!1),k.a.error({title:"Error",content:n.t0.message,onOk:function(){t.push("/plans")}});case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}})()()}),[t,a.token,e]),d)return r.a.createElement("div",{style:{textAlign:"center",background:"rgba(0, 0, 0, 0.05)",borderRadius:"4px",marginBottom:"20px",padding:"30px 50px",margin:"20px 0"}},r.a.createElement(T.a,null));var B=function(){S(!j)},q=function(){M(!0)},R=function(){var e=Object(y.a)(b.a.mark((function e(t){var n,r,l,c,o,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.logId,r=t.date,l=t.mood,c=t.actualSleepHours,e.prev=1,e.next=4,h.a.put("".concat(I,"/api/logs/").concat(n),{date:r,mood:l,actualSleepHours:c},{headers:{Authorization:"Bearer ".concat(a.token)}});case 4:o=e.sent,u=o.data,k.a.success({content:"Your log has been successfully updated",onOk:function(){var e=s.logs.map((function(e){return e._id!==n?e:u}));i(Object(V.a)(Object(V.a)({},s),{},{logs:e})),S(!1)}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),k.a.error({title:"Failed to update log",content:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var t=Object(y.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.currentTarget.id,t.prev=1,t.next=4,h.a.delete("".concat(I,"/api/plans/").concat(e,"/logs/").concat(r),{headers:{Authorization:"Bearer ".concat(a.token)}});case 4:k.a.success({content:"Your log has been successfully deleted",onOk:function(){var e=s.logs.filter((function(e){return e._id!==r}));i(Object(V.a)(Object(V.a)({},s),{},{logs:e})),S(!1)}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),k.a.error({title:"Failed to delete log",content:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),N=function(e){return j?r.a.createElement(F.a,{title:e.day,extra:r.a.createElement(Z.a,{style:{color:"red"},onClick:L,id:e._id}),style:{width:300,margin:"20px"},key:e._id},r.a.createElement(O.a,{name:"editLog",initialValues:{logId:e._id,actualSleepHours:e.actualSleepHours,mood:e.mood,date:ee()(e.date)},onFinish:R},r.a.createElement(O.a.Item,{name:"actualSleepHours",rules:[{required:!0,message:"Please input your sleep goal hours for your sleep plan"}],style:{textAlign:"center",marginBottom:"8px"}},r.a.createElement(z.a,{size:"large",min:0,max:24})),r.a.createElement(O.a.Item,{name:"mood",rules:[{required:!0,message:"Please input your mood"}],style:{textAlign:"center",marginBottom:"8px"}},r.a.createElement(w.a,{size:"large",placeholder:"Your mood..."})),r.a.createElement(O.a.Item,{name:"date",rules:[{required:!0,message:"Please input log date"}],style:{textAlign:"center",marginBottom:"8px"}},r.a.createElement(D.a,{format:"DD/MM/YYYY"})),r.a.createElement(O.a.Item,{name:"logId",hidden:!0},r.a.createElement(w.a,{value:e._id})),r.a.createElement(O.a.Item,{justify:"center",align:"middle",style:{textAlign:"center",marginBottom:"8px"}},r.a.createElement(C.a,{type:"primary",htmlType:"submit"},"Update")))):r.a.createElement(F.a,{title:e.day,style:{width:300,margin:"20px"},key:e._id},r.a.createElement("h1",{style:{textAlign:"center"}},e.actualSleepHours),r.a.createElement("h3",{style:{textAlign:"center"}},e.mood.toUpperCase()),r.a.createElement("p",{style:{textAlign:"center"}},Object(_.a)(new Date(e.date),"EEE do MMM yyyy")))};return r.a.createElement("div",null,r.a.createElement("div",{style:{padding:"24px"}},r.a.createElement(Q.a,{ghost:!1,onBack:function(){return t.goBack()},title:s.title,subTitle:s.status,extra:[s.logs.length?r.a.createElement(C.a,{key:"edit",type:"primary",onClick:B},j?"Edit Mode":"Edit"):null,j?null:r.a.createElement(C.a,{key:"add",type:"primary",onClick:q},"Add Log")]},r.a.createElement(X.a,{size:"small"},r.a.createElement(X.a.Item,{label:"Desired Hours"},s.desiredHours," hrs"),r.a.createElement(X.a.Item,{label:"Week Commencing"},Object(_.a)(new Date(s.weekCommencing),"EEE do MMM yyyy")),r.a.createElement(X.a.Item,{label:"Creation At"},Object(_.a)(new Date(s.weekCommencing),"dd-MM-yyyy"))))),function(){var e=s.logs;return e.length?r.a.createElement(v.a,{style:{display:"flex",flexWrap:"wrap"},justify:"center",align:"middle"},e.map(N)):r.a.createElement(v.a,{style:{display:"flex",flexWrap:"wrap"},justify:"center",align:"middle"},r.a.createElement("h3",null,"No logs"))}(),r.a.createElement(k.a,{title:"Add New Log",visible:H,footer:null},r.a.createElement(ae,{onCancel:function(e){M(!1)},setPlan:i,weekCommencing:s.weekCommencing})))},re=function(){var e=Object(n.useContext)(u).user;return r.a.createElement(g.d,null,r.a.createElement(g.b,{path:"/",exact:!0},e.token?r.a.createElement(g.a,{to:"/dashboard"}):r.a.createElement(g.a,{to:"/login"})),r.a.createElement(g.b,{exact:!0,path:"/login"},e.token?r.a.createElement(g.a,{to:"/dashboard"}):r.a.createElement(B,null)),r.a.createElement(g.b,{exact:!0,path:"/register"},e.token?r.a.createElement(g.a,{to:"/dashboard"}):r.a.createElement(M,null)),r.a.createElement(g.b,{exact:!0,path:"/dashboard"},e.token?r.a.createElement(G,null):r.a.createElement(g.a,{to:"/login"})),r.a.createElement(g.b,{exact:!0,path:"/plans"},e.token?r.a.createElement(U,null):r.a.createElement(g.a,{to:"/login"})),r.a.createElement(g.b,{exact:!0,path:"/plans/:planId"},e.token?r.a.createElement(ne,null):r.a.createElement(g.a,{to:"/login"})))},le=i.a.Header,ce=i.a.Content,oe=function(){var e=localStorage.getItem("user"),t=JSON.parse(e),a=Object(n.useState)(t||{}),l=Object(o.a)(a,2),c=l[0],m=l[1];return r.a.createElement(s.a,null,r.a.createElement(i.a,null,r.a.createElement(u.Provider,{value:{user:c,setUser:m}},r.a.createElement(le,{style:{padding:"0px"}},r.a.createElement(d,null)),r.a.createElement(ce,null,r.a.createElement(re,null)))))};c.a.render(r.a.createElement(oe,null),document.getElementById("root"))}},[[320,1,2]]]);
//# sourceMappingURL=main.924054fc.chunk.js.map